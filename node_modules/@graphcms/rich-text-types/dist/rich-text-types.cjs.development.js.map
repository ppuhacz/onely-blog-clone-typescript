{"version":3,"file":"rich-text-types.cjs.development.js","sources":["../src/util/isElement.ts","../src/util/isText.ts","../src/util/isEmpty.ts","../src/index.ts"],"sourcesContent":["import { ElementNode, Node } from '../';\n\nexport function isElement(node: Node): node is ElementNode {\n  return (node as ElementNode).children !== undefined;\n}\n","import { Node, Text } from '../';\n\nexport function isText(node: Node): node is Text {\n  return (node as Text).text !== undefined;\n}\n","import { ElementNode, Text } from '../';\nimport { isElement } from './isElement';\nimport { isText } from './isText';\n\nexport function isEmpty({\n  children,\n}: {\n  children: (ElementNode | Text)[];\n}): boolean {\n  // Checks if the children array has more than one element.\n  // It may have a link inside, that's why we need to check this condition.\n  if (children.length > 1) {\n    const hasText = children.filter(function f(child): boolean | number {\n      if (isText(child) && child.text !== '') {\n        return true;\n      }\n\n      if (isElement(child)) {\n        return (child.children = child.children.filter(f)).length;\n      }\n\n      return false;\n    });\n\n    return hasText.length > 0 ? false : true;\n  } else if (children[0].text === '') return true;\n\n  return false;\n}\n","export interface Element {\n  children: Array<ElementNode | Text>;\n  type:\n    | 'bulleted-list'\n    | 'numbered-list'\n    | 'list-item'\n    | 'list-item-child'\n    | 'table'\n    | 'table_head'\n    | 'table_body'\n    | 'table_row'\n    | 'table_cell'\n    | 'table_header_cell'\n    | 'block-quote'\n    | 'paragraph'\n    | 'heading-one'\n    | 'heading-two'\n    | 'heading-three'\n    | 'heading-four'\n    | 'heading-five'\n    | 'heading-six'\n    | 'class'\n    | 'link'\n    | 'image'\n    | 'video'\n    | 'iframe'\n    | 'embed'\n    | 'code-block';\n  [key: string]: unknown;\n}\n\nexport type ImageMimeTypes =\n  | 'image/webp'\n  | 'image/jpeg'\n  | 'image/bmp'\n  | 'image/gif'\n  | 'image/png';\n\nexport type VideoMimeTypes =\n  | 'video/quicktime'\n  | 'video/mp4'\n  | 'video/ogg'\n  | 'video/webm'\n  | 'video/x-msvideo';\n\nexport type AssetMimeTypes = ImageMimeTypes | VideoMimeTypes | string;\n\nexport interface Text extends Mark {\n  text: string;\n}\n\nexport type Mark = {\n  bold?: boolean;\n  italic?: boolean;\n  underline?: boolean;\n  code?: boolean;\n};\n\nexport interface ClassProps {\n  className: string;\n}\n\nexport interface ClassElement extends ClassProps, Element {\n  type: 'class';\n}\n\nexport interface LinkProps {\n  href: string;\n  className?: string;\n  rel?: string;\n  id?: string;\n  title?: string;\n  openInNewTab?: boolean;\n}\n\nexport interface LinkElement extends LinkProps, Element {\n  type: 'link';\n}\n\nexport interface ImageProps {\n  src: string;\n  title?: string;\n  width?: number;\n  height?: number;\n  handle?: string;\n  mimeType?: AssetMimeTypes;\n  altText?: string;\n}\n\nexport interface ImageElement extends ImageProps, Element {\n  type: 'image';\n}\n\nexport interface VideoProps {\n  src: string;\n  title?: string;\n  width?: number;\n  height?: number;\n  handle?: string;\n}\n\nexport interface VideoElement extends VideoProps, Element {\n  type: 'video';\n}\n\nexport interface IFrameProps {\n  url: string;\n  width?: number;\n  height?: number;\n}\n\nexport interface IFrameElement extends IFrameProps, Element {\n  type: 'iframe';\n}\n\nexport type EmbedProps<T = any> = T & {\n  id: string;\n  nodeId: string;\n  nodeType: string;\n  isInline?: boolean;\n};\n\nexport type LinkEmbedProps<T = any> = T & {\n  id: string;\n  nodeId: string;\n  nodeType: string;\n  children: any;\n};\n\nexport interface EmbedElement extends EmbedProps, Element {\n  type: 'embed' | 'link';\n}\n\nexport type ElementNode =\n  | Element\n  | ClassElement\n  | LinkElement\n  | ImageElement\n  | IFrameElement\n  | VideoElement\n  | EmbedElement;\n\nexport type Node = ElementNode | Text;\n\nexport type RichTextContent =\n  | Array<ElementNode>\n  | { children: Array<ElementNode> };\n\nexport type AssetReference = {\n  id: string;\n  mimeType: AssetMimeTypes;\n  [key: string]: any;\n};\n\nexport type Reference = {\n  id: string;\n  [key: string]: any;\n};\n\nexport type EmbedReferences = Array<Reference | AssetReference>;\n\nexport enum EmptyElementsToRemove {\n  'heading-one',\n  'heading-two',\n  'heading-three',\n  'heading-four',\n  'heading-five',\n  'heading-six',\n  'table_head',\n}\n\nexport const elementTypeKeys: { [key: string]: string } = {\n  'heading-one': 'h1',\n  'heading-two': 'h2',\n  'heading-three': 'h3',\n  'heading-four': 'h4',\n  'heading-five': 'h5',\n  'heading-six': 'h6',\n  class: 'class',\n  link: 'a',\n  image: 'img',\n  iframe: 'iframe',\n  video: 'video',\n  'bulleted-list': 'ul',\n  'numbered-list': 'ol',\n  'list-item': 'li',\n  'list-item-child': 'list_item_child',\n  table: 'table',\n  table_head: 'table_head',\n  table_body: 'table_body',\n  table_row: 'table_row',\n  table_cell: 'table_cell',\n  table_header_cell: 'table_header_cell',\n  'block-quote': 'blockquote',\n  paragraph: 'p',\n  bold: 'bold',\n  italic: 'italic',\n  underline: 'underline',\n  code: 'code',\n  'code-block': 'code_block',\n};\n\nexport * from './util/isElement';\nexport * from './util/isText';\nexport * from './util/isEmpty';\n"],"names":["isElement","node","children","undefined","isText","text","isEmpty","length","hasText","filter","f","child","EmptyElementsToRemove","elementTypeKeys","link","image","iframe","video","table","table_head","table_body","table_row","table_cell","table_header_cell","paragraph","bold","italic","underline","code"],"mappings":";;;;SAEgBA,UAAUC;AACxB,SAAQA,IAAoB,CAACC,QAArB,KAAkCC,SAA1C;AACD;;SCFeC,OAAOH;AACrB,SAAQA,IAAa,CAACI,IAAd,KAAuBF,SAA/B;AACD;;SCAeG;MACdJ,gBAAAA;;AAIA;AACA;AACA,MAAIA,QAAQ,CAACK,MAAT,GAAkB,CAAtB,EAAyB;AACvB,QAAMC,OAAO,GAAGN,QAAQ,CAACO,MAAT,CAAgB,SAASC,CAAT,CAAWC,KAAX;AAC9B,UAAIP,MAAM,CAACO,KAAD,CAAN,IAAiBA,KAAK,CAACN,IAAN,KAAe,EAApC,EAAwC;AACtC,eAAO,IAAP;AACD;;AAED,UAAIL,SAAS,CAACW,KAAD,CAAb,EAAsB;AACpB,eAAO,CAACA,KAAK,CAACT,QAAN,GAAiBS,KAAK,CAACT,QAAN,CAAeO,MAAf,CAAsBC,CAAtB,CAAlB,EAA4CH,MAAnD;AACD;;AAED,aAAO,KAAP;AACD,KAVe,CAAhB;AAYA,WAAOC,OAAO,CAACD,MAAR,GAAiB,CAAjB,GAAqB,KAArB,GAA6B,IAApC;AACD,GAdD,MAcO,IAAIL,QAAQ,CAAC,CAAD,CAAR,CAAYG,IAAZ,KAAqB,EAAzB,EAA6B,OAAO,IAAP;;AAEpC,SAAO,KAAP;AACD;;ACqID,WAAYO;AACVA,EAAAA,+DAAA,gBAAA;AACAA,EAAAA,+DAAA,gBAAA;AACAA,EAAAA,iEAAA,kBAAA;AACAA,EAAAA,gEAAA,iBAAA;AACAA,EAAAA,gEAAA,iBAAA;AACAA,EAAAA,+DAAA,gBAAA;AACAA,EAAAA,8DAAA,eAAA;AACD,CARD,EAAYA,6BAAqB,KAArBA,6BAAqB,KAAA,CAAjC;;AAUA,IAAaC,eAAe,GAA8B;AACxD,iBAAe,IADyC;AAExD,iBAAe,IAFyC;AAGxD,mBAAiB,IAHuC;AAIxD,kBAAgB,IAJwC;AAKxD,kBAAgB,IALwC;AAMxD,iBAAe,IANyC;AAOxD,WAAO,OAPiD;AAQxDC,EAAAA,IAAI,EAAE,GARkD;AASxDC,EAAAA,KAAK,EAAE,KATiD;AAUxDC,EAAAA,MAAM,EAAE,QAVgD;AAWxDC,EAAAA,KAAK,EAAE,OAXiD;AAYxD,mBAAiB,IAZuC;AAaxD,mBAAiB,IAbuC;AAcxD,eAAa,IAd2C;AAexD,qBAAmB,iBAfqC;AAgBxDC,EAAAA,KAAK,EAAE,OAhBiD;AAiBxDC,EAAAA,UAAU,EAAE,YAjB4C;AAkBxDC,EAAAA,UAAU,EAAE,YAlB4C;AAmBxDC,EAAAA,SAAS,EAAE,WAnB6C;AAoBxDC,EAAAA,UAAU,EAAE,YApB4C;AAqBxDC,EAAAA,iBAAiB,EAAE,mBArBqC;AAsBxD,iBAAe,YAtByC;AAuBxDC,EAAAA,SAAS,EAAE,GAvB6C;AAwBxDC,EAAAA,IAAI,EAAE,MAxBkD;AAyBxDC,EAAAA,MAAM,EAAE,QAzBgD;AA0BxDC,EAAAA,SAAS,EAAE,WA1B6C;AA2BxDC,EAAAA,IAAI,EAAE,MA3BkD;AA4BxD,gBAAc;AA5B0C,CAAnD;;;;;;;"}