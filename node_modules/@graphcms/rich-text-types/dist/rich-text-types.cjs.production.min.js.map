{"version":3,"file":"rich-text-types.cjs.production.min.js","sources":["../src/util/isElement.ts","../src/util/isText.ts","../src/index.ts","../src/util/isEmpty.ts"],"sourcesContent":["import { ElementNode, Node } from '../';\n\nexport function isElement(node: Node): node is ElementNode {\n  return (node as ElementNode).children !== undefined;\n}\n","import { Node, Text } from '../';\n\nexport function isText(node: Node): node is Text {\n  return (node as Text).text !== undefined;\n}\n","export interface Element {\n  children: Array<ElementNode | Text>;\n  type:\n    | 'bulleted-list'\n    | 'numbered-list'\n    | 'list-item'\n    | 'list-item-child'\n    | 'table'\n    | 'table_head'\n    | 'table_body'\n    | 'table_row'\n    | 'table_cell'\n    | 'table_header_cell'\n    | 'block-quote'\n    | 'paragraph'\n    | 'heading-one'\n    | 'heading-two'\n    | 'heading-three'\n    | 'heading-four'\n    | 'heading-five'\n    | 'heading-six'\n    | 'class'\n    | 'link'\n    | 'image'\n    | 'video'\n    | 'iframe'\n    | 'embed'\n    | 'code-block';\n  [key: string]: unknown;\n}\n\nexport type ImageMimeTypes =\n  | 'image/webp'\n  | 'image/jpeg'\n  | 'image/bmp'\n  | 'image/gif'\n  | 'image/png';\n\nexport type VideoMimeTypes =\n  | 'video/quicktime'\n  | 'video/mp4'\n  | 'video/ogg'\n  | 'video/webm'\n  | 'video/x-msvideo';\n\nexport type AssetMimeTypes = ImageMimeTypes | VideoMimeTypes | string;\n\nexport interface Text extends Mark {\n  text: string;\n}\n\nexport type Mark = {\n  bold?: boolean;\n  italic?: boolean;\n  underline?: boolean;\n  code?: boolean;\n};\n\nexport interface ClassProps {\n  className: string;\n}\n\nexport interface ClassElement extends ClassProps, Element {\n  type: 'class';\n}\n\nexport interface LinkProps {\n  href: string;\n  className?: string;\n  rel?: string;\n  id?: string;\n  title?: string;\n  openInNewTab?: boolean;\n}\n\nexport interface LinkElement extends LinkProps, Element {\n  type: 'link';\n}\n\nexport interface ImageProps {\n  src: string;\n  title?: string;\n  width?: number;\n  height?: number;\n  handle?: string;\n  mimeType?: AssetMimeTypes;\n  altText?: string;\n}\n\nexport interface ImageElement extends ImageProps, Element {\n  type: 'image';\n}\n\nexport interface VideoProps {\n  src: string;\n  title?: string;\n  width?: number;\n  height?: number;\n  handle?: string;\n}\n\nexport interface VideoElement extends VideoProps, Element {\n  type: 'video';\n}\n\nexport interface IFrameProps {\n  url: string;\n  width?: number;\n  height?: number;\n}\n\nexport interface IFrameElement extends IFrameProps, Element {\n  type: 'iframe';\n}\n\nexport type EmbedProps<T = any> = T & {\n  id: string;\n  nodeId: string;\n  nodeType: string;\n  isInline?: boolean;\n};\n\nexport type LinkEmbedProps<T = any> = T & {\n  id: string;\n  nodeId: string;\n  nodeType: string;\n  children: any;\n};\n\nexport interface EmbedElement extends EmbedProps, Element {\n  type: 'embed' | 'link';\n}\n\nexport type ElementNode =\n  | Element\n  | ClassElement\n  | LinkElement\n  | ImageElement\n  | IFrameElement\n  | VideoElement\n  | EmbedElement;\n\nexport type Node = ElementNode | Text;\n\nexport type RichTextContent =\n  | Array<ElementNode>\n  | { children: Array<ElementNode> };\n\nexport type AssetReference = {\n  id: string;\n  mimeType: AssetMimeTypes;\n  [key: string]: any;\n};\n\nexport type Reference = {\n  id: string;\n  [key: string]: any;\n};\n\nexport type EmbedReferences = Array<Reference | AssetReference>;\n\nexport enum EmptyElementsToRemove {\n  'heading-one',\n  'heading-two',\n  'heading-three',\n  'heading-four',\n  'heading-five',\n  'heading-six',\n  'table_head',\n}\n\nexport const elementTypeKeys: { [key: string]: string } = {\n  'heading-one': 'h1',\n  'heading-two': 'h2',\n  'heading-three': 'h3',\n  'heading-four': 'h4',\n  'heading-five': 'h5',\n  'heading-six': 'h6',\n  class: 'class',\n  link: 'a',\n  image: 'img',\n  iframe: 'iframe',\n  video: 'video',\n  'bulleted-list': 'ul',\n  'numbered-list': 'ol',\n  'list-item': 'li',\n  'list-item-child': 'list_item_child',\n  table: 'table',\n  table_head: 'table_head',\n  table_body: 'table_body',\n  table_row: 'table_row',\n  table_cell: 'table_cell',\n  table_header_cell: 'table_header_cell',\n  'block-quote': 'blockquote',\n  paragraph: 'p',\n  bold: 'bold',\n  italic: 'italic',\n  underline: 'underline',\n  code: 'code',\n  'code-block': 'code_block',\n};\n\nexport * from './util/isElement';\nexport * from './util/isText';\nexport * from './util/isEmpty';\n","import { ElementNode, Text } from '../';\nimport { isElement } from './isElement';\nimport { isText } from './isText';\n\nexport function isEmpty({\n  children,\n}: {\n  children: (ElementNode | Text)[];\n}): boolean {\n  // Checks if the children array has more than one element.\n  // It may have a link inside, that's why we need to check this condition.\n  if (children.length > 1) {\n    const hasText = children.filter(function f(child): boolean | number {\n      if (isText(child) && child.text !== '') {\n        return true;\n      }\n\n      if (isElement(child)) {\n        return (child.children = child.children.filter(f)).length;\n      }\n\n      return false;\n    });\n\n    return hasText.length > 0 ? false : true;\n  } else if (children[0].text === '') return true;\n\n  return false;\n}\n"],"names":["isElement","node","undefined","children","isText","text","EmptyElementsToRemove","link","image","iframe","video","table","table_head","table_body","table_row","table_cell","table_header_cell","paragraph","bold","italic","underline","code","length","filter","f","child"],"mappings":"sBAEgBA,EAAUC,eACkBC,IAAlCD,EAAqBE,kBCDfC,EAAOH,eACUC,IAAvBD,EAAcI,SC8JZC,0DAAAA,EAAAA,gCAAAA,qEAEVA,oCACAA,wCACAA,sCACAA,sCACAA,oCACAA,uDAGwD,eACzC,mBACA,qBACE,oBACD,oBACA,mBACD,WACR,QACPC,KAAM,IACNC,MAAO,MACPC,OAAQ,SACRC,MAAO,wBACU,qBACA,iBACJ,uBACM,kBACnBC,MAAO,QACPC,WAAY,aACZC,WAAY,aACZC,UAAW,YACXC,WAAY,aACZC,kBAAmB,kCACJ,aACfC,UAAW,IACXC,KAAM,OACNC,OAAQ,SACRC,UAAW,YACXC,KAAM,oBACQ,kEClMdlB,IAAAA,gBAMIA,EAASmB,OAAS,IACJnB,EAASoB,QAAO,SAASC,EAAEC,YACrCrB,EAAOqB,IAAyB,KAAfA,EAAMpB,SAIvBL,EAAUyB,KACJA,EAAMtB,SAAWsB,EAAMtB,SAASoB,OAAOC,IAAIF,UAMxCA,OAAS,GACM,KAArBnB,EAAS,GAAGE"}